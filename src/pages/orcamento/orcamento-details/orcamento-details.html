<!--
  Generated template for the OrcamentoDetailsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-navbar>
      <ion-title *ngIf="!aprovado">Destalhes do Orçamento</ion-title>

      <ion-title text-center *ngIf="aprovado">Orçamento Aprovado</ion-title>
    </ion-navbar>
  </ion-header>
  <ion-content padding>
    <div class="page">
      <div  *ngIf="!aprovado">
        <div *ngIf="orcamento?.situacao == 'PENDENTE'" class="borderEnd ">
          <h2 style="background: red;color: #ffffff" text-center>Orcamento #{{orcamento?.id}} </h2>         
        </div> 
        <div *ngIf="orcamento?.situacao == 'APROVADO'" class="borderEnd ">
            <h2 style="background: rgb(0, 199, 10);color: #ffffff" text-center>Orcamento #{{orcamento?.id}} </h2>         
        </div> 
        <div *ngIf="orcamento?.situacao == 'ANALISE'" class="borderEnd ">
            <h2 style="background: rgb(170, 146, 7);color: #ffffff" text-center>Orcamento #{{orcamento?.id}} </h2>         
        </div>
        <div *ngIf="orcamento?.situacao == 'REJEITADO'" class="borderEnd ">
            <h2 style="background: red;color: #ffffff" text-center>Orcamento #{{orcamento?.id}} </h2>         
        </div>
      
          <button class="buttonPrestador" (click)="viewPerfilPrestador(prestador?.id)"> 
            <div *ngIf="!viewPrestador" class="planoDeFundo">
              <profile-prestador
                [prestador_id]= prestador?.id 
                [prestador_nomeFantasia] = prestador?.nomeFantasia
                [prestador_slogan] = prestador?.slogan
                [prestador_img] ="prestador?.imageUrl || 'assets/imgs/avatar-blank.png'"
                ></profile-prestador>
            </div>    
              <h4  *ngIf="!viewPrestador"  style="color:#0f8bff">Visitar Perfil</h4>

            <div *ngIf="viewPrestador">
                <profile-client
                  [cliente_nome] =cliente?.nome
                  [cliente_sobrenome] =cliente?.sobrenome
                  [cliente_img] ="cliente?.imageUrl || 'assets/imgs/avatar-blank.png'"
                ></profile-client>
            </div>
          </button >
          <div class="content">
              <p class="subTitle">Produto / Serviço </p> 
              <p>{{orcamento?.produtoServico}}</p>
              <p class="subTitle">Data do orçamento</p>
              <p> {{orcamento?.data}}</p> 
              <h3 text-center  class="subTitle" >Itens do Orçamento</h3>
              <div *ngFor="let itemOrcamento of itensOrcamento;">  
                  <h6>{{itemOrcamento?.item}}</h6>
                  <div ion-item>
                      <p>Quantidade : {{itemOrcamento?.quantidade}}</p>
                      <p>Desconto : {{itemOrcamento?.desconto  | currency}}</p>
                      <p>Valor : {{itemOrcamento?.valor | currency}}</p>
                      <p>sub-Total : {{itemOrcamento?.subTotal | currency}}</p>
                  </div> 
              </div>   
              <h3 text-center  class="subTitle" >Forma de Pagamento</h3>
              <div ion-item >
                  <p>Tipo:{{orcamento?.formaDePagamento['@type']}}</p>
                  <p>Parcelas:{{orcamento?.formaDePagamento.numeroDeParcelas}}</p> 
              </div> 
              
              <p style="font-weight: bold">Desconto geral no orcamento : {{orcamento?.desconto  | currency}}</p> 
      
              <h3 text-center class="subTitle">Totais do Orcamento</h3>
              <div  ion-item >
                    <p>Desconto : </p> 
                    <p>Total   : {{orcamento?.total  | currency}}</p>
              </div>
              <div *ngIf="orcamento?.situacao == 'PENDENTE'" ion-item>
                    <p *ngIf="!viewPrestador" text-center class="area-text"> Você também pode por esse orçamento em análise para uma futura aprovação! </p>
                    <button  *ngIf="!viewPrestador"  block outline ion-button name="analise" (click)="refrashStatus('ANALISE')"> Desejo por em Análise</button>
                    
              </div>
              <div *ngIf="orcamento?.situacao != 'APROVADO'">
                  <button  *ngIf="!viewPrestador" block  ion-button (click)="refrashStatus('APROVADO')">Aprovar</button>  
                  <button  *ngIf="!viewPrestador" block  ion-button (click)="refrashStatus('REJEITADO')">Não, Obrigado!</button>
              </div>

              <div  *ngIf="orcamento?.situacao == 'APROVADO' ">
                  <h6 text-center style="color: rgb(0, 199, 10);font-size: 14px">Este orçamento já foi aprovado!</h6>
              </div>   
              <br/>
          </div>
      </div>     
          
           <!-- Confirmação de aprovação  de orçamento -->
        <div style=" padding:50px 0px 0px 0px" *ngIf="aprovado">
          <ion-card-header>
           <h1 text-center>Pronto!</h1>
           <h3 text-center>Sua aprovação foi enviada</h3>
           <p text-center class="area-confirmation">Em breve este prestador confirmará seu pedido!</p>
           <div  class="boxMascote">
             <img  style="" class="mascote" [src]="'assets/icon/mascote.JPEG'"> 
           </div>  
           </ion-card-header>
           <div>
             <button  ion-button block (click)="setCategoriasPage()">ok, vou aguardar</button>
           </div>
       </div>

    
  </div> 

       
  
          
  
  </ion-content>
  