<!--
  Generated template for the CreateOrcamentoPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>Novo Orçamento</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <div class="page">
  <!-- fab placed to the top end -->

            <p class="subTitle">Produto / Serviço </p> 
            <p>{{solicitacao?.produtoServico}}</p>
            <p class="subTitle">Data do orçamento</p>
            <p> {{data}}</p>   

    <h4 style="margin-top:25px;margin-left: 10px;"> Lista de itens*</h4>
    
      <ion-card style="height: auto">  
          <h3 style="margin: 20px 0px; font-weight:400;font-size: 20px" text-center *ngIf="listaItens == 0"  >Lista Vazia</h3>
                <div *ngFor="let itens of listaItens;"> 
                  <h1 style="margin-top:30px;margin-left:18px">{{itens.item}}</h1>
                  <div ion-item>
                      <p>Quantidade : {{itens.quantidade}}</p>
                      <p>Unidade : {{itens.unidade}}</p>
                      <p>Desconto : {{itens.desconto  | currency}}</p>
                      <p>Valor : {{itens.valor | currency}}</p>
                      <p>sub-Total : {{itens.subTotal | currency}}</p>
                      
                          <div class="iconStyle" style="">
                              <ion-icon color="danger" class="iconDetails" style="margin-left:-10px" name="trash" (click)="removeItem(itens)"></ion-icon>
                                <strong style="margin-left: 5px">remover</strong>   
                          </div> 
                  </div>

                </div>   

        </ion-card> 
      
    <ion-card style="height: auto">
        <div>
            <form [formGroup]="formGroup">
                <ion-item>
                    <ion-label stacked >Descrição do item*</ion-label>
                        <ion-input  type="text" formControlName="item">{{item}}</ion-input>
                </ion-item>
                <p class="danger" *ngIf="formGroup.controls.item.dirty && formGroup.controls.item.errors" margin-left style="color:red;font-size: 12px">Valor inválido(minimo 10 e máximo 255 caracteres)</p> 
                <div class="box1"> 
                    <div class="subBox1">
                        <ion-item>  
                            <ion-label stacked text-center  >
                                      Unidade:* <br/>
                                      <ion-select  (ionChange)="unidadeType()" style="height: 35px;" formControlName="unidade" [(ngModel)]="unidadeMd">
                                          <ion-option value="1"> UN </ion-option>
                                          <ion-option value="2"> MT  </ion-option>
                                          <ion-option value="3"> kG  </ion-option>
                                          <ion-option value="4"> LT  </ion-option>
                                      </ion-select>
                            </ion-label>
                        </ion-item> 
                     </div>  
                   <div class="subBox1">
                      <ion-label stacked text-center  >
                              Quantidade:* <br/>
                                  <ion-icon style="margin-left:20px" color="primary"  class="decrement"  name="remove-circle" (click)="decrement()"></ion-icon>
                                  <strong style="font-size: 20px;font-weight: 300" (ionChange)="clearValues()">{{quantidadeString}}</strong>  
                                  <ion-icon  style="margin-right:20px" color="primary" class="increment" name="add-circle" (click)="increment()" ></ion-icon>
                      </ion-label>
                    </div>
                    <div class="subBox2">
                      <ion-item>   
                          <ion-label stacked  text-center>Desconto*</ion-label>
                              <ion-input  text-center  type="number" text-center formControlName="desconto" [(ngModel)]="desconto" (ionChange)="calcItem()"></ion-input>
                      </ion-item>
                    </div> 
                    <div class="subBox2">
                        <ion-item>   
                            <ion-label stacked text-center>Valor*</ion-label>
                                <ion-input text-center   type="number" formControlName="valor"  [(ngModel)]="valor" (ionChange)="calcItem()"></ion-input>
                        </ion-item>
                      </div> 
                      
                      <div class="subBox2" style="margin-right: 4px;width:150px">
                          <ion-item>   
                              <ion-label style="font-size:20px;color:blue" text-center  stacked >Sub-total*</ion-label>
                                  <ion-input [disabled]="true" style="font-size:30px;color:darkblue"  type="number" text-center formControlName="subTotal"  [(ngModel)]="subTotal"></ion-input>
                          </ion-item>
                       </div> 
                 </div>
            </form>      
         </div>  
      <button ion-button block  (click)="addItem()" >Adicionar</button> 
    </ion-card>
    <h4 style="margin-top:25px;margin-left: 10px;"> Totais*</h4>
    <ion-card style="height: auto">
      <form [formGroup]="formGroup">
        <div class="box1">  
            <div class="subBox1" style="margin-right: 4px;width:150px;height:90px;margin-top:10px;">
                <ion-item>   
                    <ion-label stacked  text-center  >Desconto Geral*</ion-label>
                        <ion-input  text-center  style="font-size:30px;"  type="number" text-center formControlName="descontoGeral" [(ngModel)]="descontoGeral" (ionChange)="calcTotal()"></ion-input>
                </ion-item>
            </div>
            <div class="subBox1" style="margin-right: 4px;">
              <ion-item>   
                  <ion-label style="font-size:20px;color:blue" text-center  stacked >Total*</ion-label>
                      <ion-input [disabled]="true" style="font-size:30px;color:darkblue"  type="number" text-center formControlName="total"  [(ngModel)]="total"  (ionChange)="calcTotal()"></ion-input>
              </ion-item>
          </div> 
        </div>
      </form>        
    </ion-card>
    <button ion-button block [disabled]="viewList()" (click)="nextPage()">próximo</button>
 </div>  

</ion-content>
